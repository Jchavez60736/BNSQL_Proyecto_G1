Base de Datos: MOM_DB
Colección: Usuarios

Inserts:
db.Usuarios.insertMany([
  { _id: ObjectId("675000000000000000000001"), usuario: "admin", nombreCompleto: "Administrador General", correo: "admin@mom.org", contraseña: "hash1", rol: "Administrador", estado: "Activo" },
  { _id: ObjectId("675000000000000000000002"), usuario: "mlopez", nombreCompleto: "María López", correo: "mlopez@mom.org", contraseña: "hash2", rol: "Administrador", estado: "Activo"},
  { _id: ObjectId("675000000000000000000003"), usuario: "jrojas", nombreCompleto: "José Rojas", correo: "jrojas@mom.org", contraseña: "hash3", rol: "Administrador", estado: "Activo" }

]);

db.Usuarios.insertMany([
  { _id: ObjectId("675000000000000000000001"), 
    usuario: "admin", 
    nombreCompleto: "Administrador General", 
    correo: "admin@mom.org", 
    contraseña: "$2b$10$PoXMwbHoAz82BwwkAv24ye/INEAq5.knyipUBi90IR/CZRVjRCroC", 
    rol: "Administrador", 
    estado: "Activo" },
  { _id: ObjectId("675000000000000000000002"), 
    usuario: "mlopez", 
    nombreCompleto: "María López", 
    correo: "mlopez@mom.org", 
    contraseña: "$2b$10$SZTvQRkj4aAun0oIFJ4N.O.AL821Un1kkyHJrR.QAHkLHh9jTX1c.", 
    rol: "Administrador", 
    estado: "Activo"},
  { _id: ObjectId("675000000000000000000003"), 
    usuario: "jrojas", 
    nombreCompleto: "José Rojas", 
    correo: "jrojas@mom.org", 
    contraseña: "$2b$10$.DGXGqe2QgLwJmmJVc5l.uc3SU1v/rxrLXcR2BiU61kM.91U3B9Zy", 
    rol: "Administrador", 
    estado: "Activo" }
]);


Validators Usuarios

db.runCommand({
  collMod: "Usuarios",
  validator: {
    $jsonSchema: {
      bsonType: "object",
      description: "Estructura de la colección Usuarios. Todos los campos son obligatorios y deben cumplir reglas específicas.",
      required: [
        "usuario",
        "nombreCompleto",
        "correo",
        "contraseña",
        "rol",
        "estado"
      ],
      properties: {
        usuario: {
          bsonType: "string",
          minLength: 3,
          description: "Campo usuario: debe ser un string, mínimo 3 caracteres, sin espacios."
        },
        nombreCompleto: {
          bsonType: "string",
          pattern: "^(\\S+\\s){3}\\S+$",
          description: "Campo nombreCompleto: debe contener exactamente 4 palabras (2 nombres y 2 apellidos), separadas por un espacio."
        },
        correo: {
          bsonType: "string",
          pattern: "^.+@.+\\..+$",
          description: "Campo correo: debe ser un correo electrónico válido con formato estándar."
        },
        contraseña: {
          bsonType: "string",
          minLength: 8,
          description: "Campo contraseña: debe ser una cadena encriptada (bcrypt), mínimo 8 caracteres."
        },
        rol: {
          bsonType: "string",
          enum: ["Administrador", "Usuario", "Editor", "Supervisor"],
          description: "Campo rol: debe ser uno de los valores permitidos en el sistema (Administrador, Usuario, Editor o Supervisor)."
        },
        estado: {
          bsonType: "string",
          enum: ["Activo", "Inactivo"],
          description: "Campo estado: indica si el usuario está Activo o Inactivo dentro del sistema."
        }
      }
    }
  },
  validationLevel: "strict",
  validationAction: "error"
})

Validators Iglesias

db.createCollection("Iglesias", {
  validator: {
    $jsonSchema: {
      bsonType: "object",
      description: "Estructura de la colección Iglesias. Registra la información de cada iglesia asociada a Misión Omega Mundial.",
      required: [
        "nombreIglesia",
        "direccion",
        "telefono",
        "correo",
        "pastorPrincipal",
        "contactoNombreCompleto",
        "contactoTelefono",
        "fechaRegistro"
      ],
      properties: {
        nombreIglesia: {
          bsonType: "string",
          minLength: 3,
          description: "Nombre de la iglesia. Debe ser un string con mínimo 3 caracteres."
        },
        direccion: {
          bsonType: "string",
          minLength: 10,
          description: "Dirección física de la iglesia. Debe ser un string con mínimo 10 caracteres."
        },
        telefono: {
          bsonType: "string",
          pattern: "^[0-9]{8}$",
          description: "Número de teléfono de la iglesia. Debe contener exactamente 8 dígitos."
        },
        correo: {
          bsonType: "string",
          pattern: "^.+@.+\\..+$",
          description: "Correo electrónico válido de la iglesia."
        },
        pastorPrincipal: {
          bsonType: "string",
          minLength: 5,
          description: "Nombre del pastor principal de la iglesia."
        },
        contactoNombreCompleto: {
          bsonType: "string",
          pattern: "^(\\S+\\s){3}\\S+$",
          description: "Nombre completo del contacto principal (exactamente 4 palabras: 2 nombres y 2 apellidos)."
        },
        contactoTelefono: {
          bsonType: "string",
          pattern: "^[0-9]{8}$",
          description: "Número de teléfono del contacto principal. Debe tener exactamente 8 dígitos."
        },
        fechaRegistro: {
          bsonType: "date",
          description: "Fecha en que la iglesia fue registrada en el sistema."
        }
      }
    }
  },
  validationLevel: "strict",
  validationAction: "error"
})


Validators Proveedor

db.createCollection("Proveedores", {
  validator: {
    $jsonSchema: {
      bsonType: "object",
      description: "Estructura de la colección Proveedores. Registra información de los proveedores que suministran artículos o materiales a Misión Omega Mundial.",
      required: [
        "nombreProveedor",
        "personaContacto",
        "telefono",
        "correo",
        "direccion"
      ],
      properties: {
        nombreProveedor: {
          bsonType: "string",
          minLength: 3,
          description: "Nombre del proveedor. Debe ser un string con al menos 3 caracteres."
        },
        personaContacto: {
          bsonType: "string",
          minLength: 5,
          description: "Nombre de la persona de contacto del proveedor."
        },
        telefono: {
          bsonType: "string",
          pattern: "^[0-9]{8}$",
          description: "Número de teléfono del proveedor. Debe contener exactamente 8 dígitos."
        },
        correo: {
          bsonType: "string",
          pattern: "^.+@.+\\..+$",
          description: "Correo electrónico del proveedor en un formato válido."
        },
        direccion: {
          bsonType: "string",
          minLength: 10,
          description: "Dirección física del proveedor. Debe tener al menos 10 caracteres."
        },
        observaciones: {
          bsonType: "string",
          description: "Campo opcional para notas u observaciones adicionales del proveedor."
        }
      }
    }
  },
  validationLevel: "strict",
  validationAction: "error"
})

Validators Inventario

db.createCollection("SalidasInventario", {
  validator: {
    $jsonSchema: {
      bsonType: "object",
      description: "Registra los movimientos de salida del inventario, incluyendo fecha, tipo de salida, usuario responsable y detalle de los ítems retirados.",
      required: [
        "fechaSalida",
        "tipoSalida",
        "usuarioResponsable",
        "items"
      ],
      properties: {
        fechaSalida: {
          bsonType: "date",
          description: "Fecha en la que se realizó la salida del inventario."
        },
        tipoSalida: {
          bsonType: "string",
          enum: ["Donación", "Traslado"],
          description: "Tipo de salida realizada. Valores permitidos: Donación o Traslado."
        },
        usuarioResponsable: {
          bsonType: "string",
          minLength: 3,
          description: "Nombre del usuario responsable del registro de salida."
        },
        items: {
          bsonType: "array",
          minItems: 1,
          description: "Listado de ítems retirados en esta salida. Cada ítem incluye cantidad y observaciones.",
          items: {
            bsonType: "object",
            required: ["idArticulo", "cantidad"],
            description: "Objeto que representa un ítem retirado.",
            properties: {
              idArticulo: {
                bsonType: "objectId",
                description: "Identificador del artículo retirado (ObjectId que referencia la colección de inventario)."
              },
              cantidad: {
                bsonType: "int",
                minimum: 1,
                description: "Cantidad de unidades retiradas del artículo. Debe ser un número entero mayor o igual a 1."
              },
              observaciones: {
                bsonType: "string",
                description: "Notas u observaciones adicionales sobre el ítem retirado. Campo opcional."
              }
            }
          }
        }
      }
    }
  },
  validationLevel: "strict",
  validationAction: "error"
})

